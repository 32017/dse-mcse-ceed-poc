(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[132],{1327:function(e,t,r){"use strict";r.d(t,{uC:function(){return C},TF:function(){return v},ov:function(){return x},HG:function(){return f},P0:function(){return y},AU:function(){return h},A4:function(){return m},_q:function(){return S},Xp:function(){return N},TR:function(){return Z},qo:function(){return g},qG:function(){return w},DH:function(){return D},Cs:function(){return j},bI:function(){return b}});var n=r(1413),i=r(74165),a=r(15861),o=r(31243).Z.create({baseURL:"https://ebu-lsp-api-dev.azurewebsites.net",timeout:6e4});o.interceptors.request.use((function(e){return console.log("Starting Request",JSON.stringify(e,null,2)),e})),o.interceptors.response.use((function(e){return 200===e.status?e.data:Promise.reject(e)}),(function(e){return Promise.reject(e)}));var s,u=o,c=r(32808),l=r.n(c),d=r(40757),p=function(e){return e+"?"+l().stringify({code:"G0JQzK7qoEKnPD8v1esiGhpVUigfOVqUggRfd6wCDXYrAzFu41ZG-w=="})},f=function(e){var t={body:{orderId:e}},r=p("api/getOrderById");return u.post(r,t.body)},m=function(e){var t={body:{statuses:e}},r=p("api/getOrdersByStatus");return u.post(r,t.body)},v=function(e,t){var r={body:{action:e,orderId:t}},n=p("api/approveOrder");return u.post(n,r.body)},h=function(e){var t={body:{taxID:e.taxID,orderId:e.orderId,startDate:e.startDate,endDate:e.endDate}},r=p("api/getOrders");return u.post(r,t.body)},y=function(e){var t={body:{company:e.company,createdDate:e.createdDate}},r=p("api/getOrderReports");return u.post(r,t.body)},x=function(e,t){return(s=s||(0,a.Z)((0,i.Z)().mark((function e(t,r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("https://ebudatadev.blob.core.windows.net/lspoutput/".concat(t,"-").concat(r,".json.gz"),{responseType:"arraybuffer"});case 2:return n=e.sent,e.abrupt("return",(0,d.xe)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},b=function(e){var t={body:e,headers:{headers:{"Content-Type":"multipart/form-data"}}},r=p("api/uploadProductFile");return u.post(r,t.body,t.headers)},g=function(e){var t={body:{userName:e.userName,description:e.description,importFiles:e.importFiles}},r=p("api/saveProductVersion");return u.post(r,t.body,t.headers)},Z=function(e){var t={body:(0,n.Z)({},e)},r=p("api/saveOrder");return u.post(r,t.body)},j=function(e){var t={body:(0,n.Z)({},e)},r=p("api/updateOrder");return u.post(r,t.body)},N=function(e){var t={body:(0,n.Z)({},e)},r=p("api/getProducts");return u.post(r,t.body)},S=function(){var e=p("api/getProductVersions");return u.post(e)},C=function(){var e=p("api/adfPipelineTrigger");return u.post(e)},w=function(e){var t={body:{userName:e.userName,importFiles:e.importFiles}},r=p("api/updateLatestVersionData");return u.post(r,t.body,t.headers)},D=function(e){var t={body:{status:"IN_PROGRESS"}},r=p("api/updateLatestVersionData");return u.post(r,t.body,t.headers)}},14927:function(e,t,r){"use strict";var n=r(74165),i=r(15861),a=r(29439),o=r(72791);t.Z=function(e){var t,r=(0,o.useState)(null),s=(0,a.Z)(r,2),u=s[0],c=s[1],l=(0,o.useState)(""),d=(0,a.Z)(l,2),p=d[0],f=d[1],m=(0,o.useState)(!1),v=(0,a.Z)(m,2),h=v[0],y=v[1];return{data:u,error:p,loading:h,request:function(){return(t=t||(0,i.Z)((0,n.Z)().mark((function t(){var r,i,a,o,s,u=arguments;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(y(!0),f(""),r=u.length,i=new Array(r),a=0;a<r;a++)i[a]=u[a];return t.prev=3,t.next=6,e.apply(void 0,i);case 6:return o=t.sent,console.log("response: ",JSON.stringify(o)),console.log("apiFuntions: ",null===e||void 0===e?void 0:e.name),c(o),t.abrupt("return",o);case 13:t.prev=13,t.t0=t.catch(3),s="ReactNativeError: args: ".concat(i," ").concat(t.t0.message," "),console.error(s),f(t.t0.message||"API request Unexpected Error!");case 18:return t.prev=18,y(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[3,13,18,21]])})))).apply(this,arguments)},resetError:function(){f("")},resetData:function(){c(null)}}}},42031:function(e,t,r){"use strict";r.d(t,{A:function(){return n},x:function(){return i}});var n=[{id:"additional_product",displayName:"Additional Product"},{id:"enterprise",displayName:"Enterprise"},{id:"faculty",displayName:"Faculty"},{id:"mvlp",displayName:"MVLP"},{id:"server_and_cloud_enrollment",displayName:"Server and Cloud Enrollment"},{id:"student",displayName:"Student"},{id:"mpsa",displayName:"MPSA"}],i=[{id:"A",displayName:"A"},{id:"B",displayName:"B"},{id:"C",displayName:"C"},{id:"D",displayName:"D"},{id:"NON SPECIFIC",displayName:"NON SPECIFIC"}]},70027:function(e,t,r){"use strict";var n=r(29439),i=r(72791),a=r(78983),o=r(80184);t.Z=function(e){var t=(0,i.useState)(!1),r=(0,n.Z)(t,2),s=r[0],u=r[1];return(0,i.useEffect)((function(){u(e.isShow)}),[e.isShow]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(a.Tk,{alignment:"center",visible:s,onClose:e.closeModal,children:[(0,o.jsx)(a.p0,{children:(0,o.jsx)(a.fl,{children:e.title||""})}),(0,o.jsx)(a.sD,{children:e.infoContain}),(0,o.jsxs)(a.Ym,{children:[e.leftBtnText&&(0,o.jsx)(a.u5,{color:"secondary",onClick:e.handleLeftBtn,children:e.leftBtnText}),e.rightBtnText&&(0,o.jsx)(a.u5,{color:"primary",onClick:e.handleRightBtn,children:e.rightBtnText})]})]})})}},71368:function(e,t,r){"use strict";var n=r(29439),i=r(72791),a=r(78983),o=r(80184);t.Z=function(e){var t=(0,i.useState)(!1),r=(0,n.Z)(t,2),s=r[0],u=r[1];return(0,i.useEffect)((function(){u(e.isShow)}),[e.isShow]),s?(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(a.LQ,{className:"m-5"})}):null}},43752:function(e,t,r){"use strict";var n=r(1413),i=r(29439),a=r(72791),o=r(1327),s=r(14927),u=r(71368),c=r(80184);t.Z=function(e){return function(t){var r=(0,a.useState)(null),l=(0,i.Z)(r,2),d=l[0],p=l[1],f=(0,a.useState)(!1),m=(0,i.Z)(f,2),v=m[0],h=m[1],y=(0,s.Z)(o._q),x=y.request,b=y.data,g=y.error,Z=y.loading;(0,a.useEffect)((function(){x()}),[v]);(0,a.useEffect)((function(){j()}),[g,b]);var j=function(){g&&console.error("execute getProductVersions() error",g),b&&(200===b.status?p(b.data):console.log("execute getProductVersions() data error",null===b||void 0===b?void 0:b.status))};return Z?(0,c.jsx)(u.Z,{isShow:!0}):(0,c.jsx)(e,(0,n.Z)((0,n.Z)({},t),{},{version:d,callbackFunc:function(){h(!v)}}))}}},12784:function(e,t,r){"use strict";r.r(t);var n=r(74165),i=r(15861),a=r(29439),o=r(72791),s=r(78983),u=r(42031),c=r(1327),l=r(14927),d=r(24846),p=r(79041),f=r(70027),m=r(43752),v=r(80184),h={infoContain:"\u4e0a\u50b3\u6210\u529f",title:""},y={infoContain:"\u7cfb\u7d71\u5fd9\u788c\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66",title:"\u7cfb\u7d71\u932f\u8aa4"},x=u.A.map((function(e){return{label:e.displayName,value:e.id}})),b={userName:"admin",importFiles:[{fileName:"",category:x[0].value}],excelData:null};t.default=(0,m.Z)((function(e){var t,r,u,m,g=(0,l.Z)(c.qG),Z=g.request,j=g.data,N=g.loading,S=g.error,C=(0,l.Z)(c.uC),w=(0,l.Z)(c.DH),D=(0,l.Z)(c.bI),F=o.useRef(),_=(0,o.useState)(0),P=(0,a.Z)(_,2),q=P[0],k=P[1],I=(0,o.useState)(b),A=(0,a.Z)(I,2),E=A[0],O=A[1],R=(0,o.useState)(!1),B=(0,a.Z)(R,2),T=B[0],V=B[1],G=(0,o.useState)(!1),L=(0,a.Z)(G,2),M=L[0],z=L[1],U=(0,o.useState)({infoContain:"",title:""}),H=(0,a.Z)(U,2),J=H[0],K=H[1],Q=function(){k(0),F.current.value=null,V(!1),O(b)};(0,o.useEffect)((function(){var e;(S||j&&200!==j.status||C.error||C.data&&200!==C.data.status)&&(Q(),K(y),z(!0)),C.data&&200===(null===(e=C.data)||void 0===e?void 0:e.status)&&(K(h),z(!0))}),[j,S,C.data,C.error]);var X=function(e){var t=e.show;return t?(0,v.jsx)(s.b7,{md:1,className:"d-flex align-items-end mb-4",children:(0,v.jsx)(d.Z,{className:1===t?"text-secondary":"text-success",icon:p._,size:"lg"})}):null};return(0,v.jsxs)("div",{className:"px-3",children:[(0,v.jsxs)(s.KB,{children:[(0,v.jsx)(s.Gc,{color:"info",dismissible:!0,children:"MS\u6a9f\u683c\u518a\u65b0\u589e\u9805\u76ee: \u66f4\u65b0\u76ee\u524d\u7248\u672c\u7684MS\u6a9f\u683c\u518a"}),e.version&&"enable"!==(null===(u=e.version)||void 0===u||null===(m=u.latestVersionData)||void 0===m?void 0:m.status)?(0,v.jsx)(s.Gc,{color:"warning",dismissible:!0,children:"\u56e0\u7576\u524d\u50f9\u683c\u518a\u7248\u865f\u8207\u6700\u65b0\u50f9\u683c\u518a\u7248\u672c\u4e0d\u540c\uff0c\u76ee\u524d\u7248\u672c\u66ab\u6642\u7121\u6cd5\u65b0\u589e\u9805\u76ee"}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h5",{className:"mb-3",children:"\u65b0\u589e\u6a94\u6848"}),(0,v.jsx)("div",{className:"form-box mb-1 pt-4 pb-0",style:{borderRadius:"10px 10px 0 0"},children:(0,v.jsxs)(s.rb,{children:[(0,v.jsx)(s.b7,{md:4,children:(0,v.jsx)(s.LX,{options:x,defaultValue:x[0].value,onChange:function(e){return function(e){E.importFiles[0].category=e.target.value,O(E)}(e)}})}),(0,v.jsx)(s.b7,{md:7,children:(0,v.jsxs)(s.YR,{className:"mb-3",children:[(0,v.jsx)(s.jO,{type:"file",accept:".xlsx",id:"inputFile",onChange:function(e){return function(e){var t=e.target.files;E.importFiles[0].fileName=t[0].name,E.excelData=t[0],O(E),""!==e.target.files&&V(!0)}(e)},ref:F}),(0,v.jsx)(s.u5,{type:"button",color:T?"primary":"secondary",variant:"outline",disabled:!T,onClick:function(){return(t=t||(0,i.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(2),(t=new FormData).append("file",E.excelData),e.next=5,D.request(t.getAll("file")).then((function(e){200===e.status&&k(2)})).catch((function(e){Q(),console.error("uploadProductFileApi error",e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:"\u958b\u59cb\u4e0a\u50b3"}),(0,v.jsx)(s.u5,{type:"button",color:"secondary",variant:"outline",onClick:Q,children:"\u79fb\u9664"})]})}),(0,v.jsx)(X,{show:q})]})}),(0,v.jsx)("div",{className:"form-box",style:{borderRadius:"0 0 10px 10px"},children:(0,v.jsx)(s.rb,{md:{cols:12},children:(0,v.jsx)(s.b7,{md:12,children:(0,v.jsx)(s.u5,{onClick:function(){return(r=r||(0,i.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.importFiles,e.next=3,Z({userName:"admin",importFiles:t}).then((function(e){200===(null===e||void 0===e?void 0:e.status)&&(C.request().then((function(){w.request()})),Q())}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},disabled:!q,color:q?"primary":"secondary",type:"button",variant:"outline",children:N?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.LQ,{component:"span",size:"sm","aria-hidden":"true"}),(0,v.jsx)("span",{children:" Loading..."})]}):"\u66f4\u65b0\u50f9\u683c\u518a"})})})})]})]}),(0,v.jsx)(f.Z,{isShow:M,closeModal:function(){return z(!1)},handleRightBtn:function(){z(!1)},rightBtnText:"\u6211\u77e5\u9053\u4e86",title:J.title,infoContain:J.infoContain})]})}))},79041:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});var n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M426.072,86.928A238.75,238.75,0,0,0,88.428,424.572,238.75,238.75,0,0,0,426.072,86.928ZM257.25,462.5c-114,0-206.75-92.748-206.75-206.75S143.248,49,257.25,49,464,141.748,464,255.75,371.252,462.5,257.25,462.5Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='221.27 305.808 147.857 232.396 125.23 255.023 221.27 351.063 388.77 183.564 366.142 160.937 221.27 305.808' class='ci-primary'/>"]},24654:function(){}}]);
//# sourceMappingURL=132.a1633cba.chunk.js.map