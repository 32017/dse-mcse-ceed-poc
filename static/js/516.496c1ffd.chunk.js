(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[516],{1327:function(e,n,t){"use strict";t.d(n,{TF:function(){return x},ov:function(){return N},HG:function(){return m},P0:function(){return j},AU:function(){return f},A4:function(){return h},_q:function(){return P},Xp:function(){return C},TR:function(){return g},qo:function(){return b},Cs:function(){return y},bI:function(){return v}});var r=t(1413),a=t(74165),i=t(15861),o=t(31243).Z.create({baseURL:"https://ebu-lsp-api-dev.azurewebsites.net",timeout:6e4});o.interceptors.request.use((function(e){return console.log("Starting Request",JSON.stringify(e,null,2)),e})),o.interceptors.response.use((function(e){return 200===e.status?e.data:Promise.reject(e)}),(function(e){return Promise.reject(e)}));var s,l=o,c=t(32808),u=t.n(c),d=t(40757),p=function(e){return e+"?"+u().stringify({code:"G0JQzK7qoEKnPD8v1esiGhpVUigfOVqUggRfd6wCDXYrAzFu41ZG-w=="})},m=function(e){var n={body:{orderId:e}},t=p("api/getOrderById");return l.post(t,n.body)},h=function(e){var n={body:{status:e}},t=p("api/getOrdersByStatus");return l.post(t,n.body)},x=function(e,n){var t={body:{action:e,orderId:n}},r=p("api/approveOrder");return l.post(r,t.body)},f=function(e){var n={body:{taxID:e.taxID,orderId:e.orderId,startDate:e.startDate,endDate:e.endDate}},t=p("api/getOrders");return l.post(t,n.body)},j=function(e){var n={body:{company:e.company,createdDate:e.createdDate}},t=p("api/getOrderReports");return l.post(t,n.body)},N=function(e,n){return(s=s||(0,i.Z)((0,a.Z)().mark((function e(n,t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get("https://ebudatadev.blob.core.windows.net/lspoutput/".concat(n,"-").concat(t,".json.gz"),{responseType:"arraybuffer"});case 2:return r=e.sent,e.abrupt("return",(0,d.xe)(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},v=function(e){var n={body:e,headers:{headers:{"Content-Type":"multipart/form-data"}}},t=p("api/uploadProductFile");return l.post(t,n.body,n.headers)},b=function(e){var n={body:{userName:e.userName,description:e.description,importFiles:e.importFiles}},t=p("api/saveProductVersion");return l.post(t,n.body,n.headers)},g=function(e){var n={body:(0,r.Z)({},e)},t=p("api/saveOrder");return l.post(t,n.body)},y=function(e){var n={body:(0,r.Z)({},e)},t=p("api/updateOrder");return l.post(t,n.body)},C=function(e){var n={body:(0,r.Z)({},e)},t=p("api/getProducts");return l.post(t,n.body)},P=function(){var e=p("api/getProductVersions");return l.post(e)}},42031:function(e,n,t){"use strict";t.d(n,{A:function(){return r},x:function(){return a}});var r=[{id:"additional_product",displayName:"Additional Product"},{id:"enterprise",displayName:"Enterprise"},{id:"faculty",displayName:"Faculty"},{id:"mvlp",displayName:"MVLP"},{id:"server_and_cloud_enrollment",displayName:"Server and Cloud Enrollment"},{id:"student",displayName:"Student"},{id:"mpsa",displayName:"MPSA"}],a=[{id:"A",displayName:"A"},{id:"B",displayName:"B"},{id:"C",displayName:"C"},{id:"D",displayName:"D"},{id:"NON SPECIFIC",displayName:"NON SPECIFIC"}]},70027:function(e,n,t){"use strict";var r=t(29439),a=t(72791),i=t(78983),o=t(80184);n.Z=function(e){var n=(0,a.useState)(!1),t=(0,r.Z)(n,2),s=t[0],l=t[1];return(0,a.useEffect)((function(){l(e.isShow)}),[e.isShow]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(i.Tk,{alignment:"center",visible:s,onClose:e.closeModal,children:[(0,o.jsx)(i.p0,{children:(0,o.jsx)(i.fl,{children:e.title||""})}),(0,o.jsx)(i.sD,{children:e.infoContain}),(0,o.jsx)(i.Ym,{children:(0,o.jsx)(i.u5,{color:"primary",onClick:e.closeModal,children:"\u6211\u77e5\u9053\u4e86"})})]})})}},71368:function(e,n,t){"use strict";var r=t(29439),a=t(72791),i=t(78983),o=t(80184);n.Z=function(e){var n=(0,a.useState)(!1),t=(0,r.Z)(n,2),s=t[0],l=t[1];return(0,a.useEffect)((function(){l(e.isShow)}),[e.isShow]),s?(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(i.LQ,{className:"m-5"})}):null}},95364:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var r=t(74165),a=t(15861),i=t(93433),o=t(1413),s=t(29439),l=t(72791),c=t(57689),u=t(24846),d=t(22800),p=t(42439),m=t(511),h=t(11941),x=t(24108),f=t(763),j=t(34404),N=t.n(j),v=t(40757),b=t(78983),g=t(1327),y=t(70027),C={basicInfo:{orderNum:"",company:"",taxID:"",contactPerson:"",email:"",phone:"",address:""},quotationGroup:[{groupName:"",productLists:[{partNum:"",productDes:"",startDate:null,measure:"",quantity:null,unitPrice:null,QTY:null,country:"",totalAmount:null,estimatedRetailPrice:null,currentNetPrice:null,discountedNetPrice:null,customerDiscount:null,maximumReslaePrice:null,markupMargin:null}]}],quotationTotal:{taxExcluded:0,taxIncluded:0,tax:0}},P=[{key:"Part Number",label:"Part Number",_style:{minWidth:"145px"}},{key:"Product Description",label:"Product Description",_style:{minWidth:"300px"}},{key:"Usge start Date",label:"Usge start Date"},{key:"Unit of Measure",label:"Unit of Measure"},{key:"Unit of Quantity",label:"Unit of Quantity"},{key:"Unit Price (TWD)",label:"Unit Price (TWD)"},{key:"License Qty",label:"License Qty"},{key:"Usage country",label:"Usage country"},{key:"Total Amount (TWD)",label:"Total Amount (TWD)"},{key:"Estimated Retail Price",label:"Estimated Retail Price/\u50f9\u683c\u518a",_props:{className:"text-success"}},{key:"Current Net Price (TWD)",label:"Current Net Price (TWD)/\u50f9\u683c\u518a",_props:{className:"text-success"}},{key:"Discounted Net Price (CPS)",label:"Discounted Net Price (CPS)",_props:{className:"text-success"}},{key:"Customer Discount %",label:"Customer Discount %",_props:{className:"text-success"}},{key:"Maximum Reslae Price (MRP)",label:"Maximum Reslae Price (MRP)",_props:{className:"text-success"}},{key:"mark up margin",label:"mark up margin",_props:{className:"text-warning"},_style:{minWidth:"120px"}},{key:"active",label:""}],k=[{key:"action",label:"\u9078\u64c7",_props:{color:"dark"},_style:{width:"50px"}},{key:"search_pd_name",label:"Item Name",_props:{color:"dark"},_style:{width:"40%"}},{key:"search_level",label:"Level",_props:{color:"dark"}},{key:"search_purchase_unit",label:"Purchase Unit",_props:{color:"dark"}},{key:"search_purchase_period",label:"Purchase Period",_props:{color:"dark"}},{key:"search_current_net_price",label:"Current Net Price",_props:{color:"dark"}},{key:"search_estimated_retail_price",label:"Estimated Retail Price",_props:{color:"dark"}}],Z=t(42031),D=t(80184),q=function(e){var n,t=e.open,i=e.setCurrentItemData,c=e.onClose,u=(0,l.useState)({category:Z.A[0].id,partNum:"",keywords:"",level:Z.x[0].id}),d=(0,s.Z)(u,2),p=d[0],m=d[1],h=(0,l.useState)([]),x=(0,s.Z)(h,2),f=x[0],j=x[1],N=(0,l.useState)(null),v=(0,s.Z)(N,2),y=v[0],C=v[1];return(0,D.jsxs)(b.Tk,{className:"product-select-modal",visible:t,onClose:c,children:[(0,D.jsx)(b.p0,{children:(0,D.jsx)(b.fl,{children:"\u641c\u5c0b\u7522\u54c1\u9805\u76ee"})}),(0,D.jsxs)(b.sD,{children:[(0,D.jsx)("div",{className:"px-2",children:(0,D.jsxs)(b.rb,{children:[(0,D.jsx)(b.b7,{className:"col-2",children:(0,D.jsxs)(b.YR,{children:[(0,D.jsx)(b.wV,{children:"\u985e\u5225"}),(0,D.jsx)(b.LX,{onChange:function(e){return m((0,o.Z)((0,o.Z)({},p),{},{category:e.target.value}))},children:Z.A.map((function(e){return(0,D.jsx)("option",{value:e.id,children:e.displayName},e.id)}))})]})}),(0,D.jsx)(b.b7,{className:"col-2",children:(0,D.jsxs)(b.YR,{children:[(0,D.jsx)(b.wV,{children:"PN"}),(0,D.jsx)(b.jO,{placeholder:"part number",minLength:5,onChange:function(e){return m((0,o.Z)((0,o.Z)({},p),{},{partNum:e.target.value}))}})]})}),(0,D.jsx)(b.b7,{className:"col-4",children:(0,D.jsxs)(b.YR,{children:[(0,D.jsx)(b.wV,{children:"\u95dc\u9375\u5b57"}),(0,D.jsx)(b.jO,{placeholder:"\u8acb\u8f38\u5165\u95dc\u9375\u5b57(\u81f3\u5c11\u70ba5\u5b57)",minLength:5,onChange:function(e){return m((0,o.Z)((0,o.Z)({},p),{},{keywords:e.target.value}))}})]})}),(0,D.jsx)(b.b7,{className:"col-2",children:(0,D.jsxs)(b.YR,{children:[(0,D.jsx)(b.wV,{children:"Level"}),(0,D.jsx)(b.LX,{onChange:function(e){return m((0,o.Z)((0,o.Z)({},p),{},{level:e.target.value}))},children:Z.x.map((function(e){return(0,D.jsx)("option",{value:e.id,children:e.displayName},e.id)}))})]})}),(0,D.jsx)(b.b7,{className:"col-2",children:(0,D.jsx)(b.u5,{className:"w-100",color:"primary",variant:"outline",onClick:function(){return(n=n||(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a,i,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.keywords,a=p.level,i=p.partNum,!(!(o=p.category)||i||t&&t<5)&&a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,g.Xp)({category:o,partNumber:i,itemName:t,level:a});case 5:s=e.sent,null!==(l=s.data)&&void 0!==l&&null!==(n=l.products)&&void 0!==n&&n.length&&j(l.products);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:"\u641c\u5c0b\u76f8\u95dc\u54c1\u9805"})})]})}),(0,D.jsxs)("div",{className:"px-2 py-4",children:[(0,D.jsx)("h5",{children:"\u7be9\u9078\u7d50\u679c"}),(0,D.jsx)("div",{children:(0,D.jsx)(b.Sx,{hover:!0,columns:k,children:(0,D.jsx)(b.NR,{children:f&&f.length?f.map((function(e){return(0,D.jsxs)(b.T6,{children:[(0,D.jsx)(b.NN,{children:(0,D.jsx)(b.EC,{type:"radio",name:"searchProduct",id:e.partNumber,value:e.partNumber,onChange:function(){C(e)},defaultChecked:!(null===y||void 0===y||!y.partNumber)&&e.partNumber===y.partNumber})}),(0,D.jsx)(b.NN,{children:e.itemName}),(0,D.jsx)(b.NN,{children:e.level}),(0,D.jsx)(b.NN,{children:e.purchaseUnit}),(0,D.jsx)(b.NN,{children:e.purchasePeriod}),(0,D.jsx)(b.NN,{children:e.currentNetPrice}),(0,D.jsx)(b.NN,{children:e.estimatedRetailPrice})]},"".concat(e.partNumber))})):(0,D.jsx)(b.T6,{children:(0,D.jsx)(b.NN,{colSpan:7,children:"\u5c1a\u7121\u8cc7\u6599"})})})})})]})]}),(0,D.jsxs)(b.Ym,{children:[(0,D.jsx)(b.u5,{color:"secondary",onClick:c,children:"Close"}),(0,D.jsx)(b.u5,{color:"primary",onClick:function(){if(y)return i?i(y):null},children:"\u9078\u64c7"})]})]})},_=t(71368),T=function(){var e,n=(0,l.useMemo)((function(){return new(N())({length:5})}),[]),t=(0,c.UO)().childPath,j=(0,c.s0)(),k=(0,l.useState)(!1),Z=(0,s.Z)(k,2),T=Z[0],w=Z[1],S=(0,l.useState)(!1),I=(0,s.Z)(S,2),O=I[0],R=I[1],G=(0,l.useState)(0),V=(0,s.Z)(G,2),L=V[0],E=V[1],A=(0,l.useState)(0),M=(0,s.Z)(A,2),Y=M[0],U=M[1],z=(0,l.useState)(null),F=(0,s.Z)(z,2),X=F[0],Q=F[1],W=(0,l.useState)({open:!1,title:"",infoContain:""}),B=(0,s.Z)(W,2),K=B[0],$=B[1],H=(0,l.useState)([]),J=(0,s.Z)(H,2),ee=J[0],ne=J[1],te=function(e){var n=(0,f.cloneDeep)(X.quotationGroup),t=(0,f.cloneDeep)(se(C.quotationGroup[0].productLists));"PS"===e&&(t[0].partNum="PS");var r=[].concat((0,i.Z)(n[L].productLists),(0,i.Z)(t));n[L].productLists=r,n[L].subTotal=ae(r),Q((function(e){return(0,o.Z)((0,o.Z)({},e),{},{quotationGroup:n,quotationTotal:ie(n)})}))},re=function(e,n,t){var r=(0,f.cloneDeep)(X.quotationGroup),a=r[L].productLists;a[e][n]=t;var i=a[e],s=i.discountedNetPrice,l=i.markupMargin,c=i.currentNetPrice,u=i.quantity,d=i.QTY,p=i.estimatedRetailPrice;s&&l&&(a[e].unitPrice=s*(1+l/100)),s&&(a[e].customerDiscount=Math.round((c-s)/c*1e4)/100),u&&a[e].unitPrice&&d&&(a[e].totalAmount=Math.round(u*a[e].unitPrice*d)),p&&(a[e].maximumReslaePrice=Math.round(p*(1-a[e].customerDiscount/100))),r[L].subTotal=ae(a),Q((function(e){return(0,o.Z)((0,o.Z)({},e),{},{quotationGroup:r,quotationTotal:ie(r)})}))},ae=function(e){var n=0;return e.forEach((function(e){n+=e.totalAmount})),n},ie=function(e){if(null!==e&&void 0!==e&&e.length){var n=0;return e.forEach((function(e){n+=e.subTotal})),{taxExcluded:n=Math.round(n),tax:Math.round(.05*n),taxIncluded:Math.round(1.05*n)}}},oe=function(e,n){var t=(0,f.cloneDeep)(de);t[e]=n,Q((function(e){return(0,o.Z)((0,o.Z)({},e),{},{basicInfo:t})}))},se=function(e){return e.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{uniKey:n.rnd()})}))},le=(0,l.useCallback)((function(e){var t=(0,f.cloneDeep)(e);return t.forEach((function(e,t){e.groupName||(e.groupName="\u7fa4\u7d44".concat(t+1));var r=e.productLists.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{uniKey:n.rnd()})}));return e.productLists=r})),t}),[n]),ce=function(n){return(e=e||(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,i,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=X.basicInfo,a=t.company,i=t.taxID,a&&i){e.next=3;break}return e.abrupt("return",$({open:!0,title:"\u9a57\u8b49\u932f\u8aa4",infoContain:"\u5fc5\u586b\u8cc7\u6599\u4e0d\u80fd\u70ba\u7a7a(\u516c\u53f8\u540d\u7a31\u3001\u7d71\u7de8)"}));case 3:if("save"!==n){e.next=10;break}return e.next=6,(0,g.TR)(X);case 6:o=e.sent,s=o.data,200===o.status&&null!==s&&void 0!==s&&s.orderId?(Q(null),j("/quotation/edit?orderId=".concat(s.orderId))):$({open:!0,title:"\u5831\u50f9\u55ae\u5132\u5b58\u932f\u8aa4",infoContain:"\u8acb\u7a0d\u5f8c\u518d\u8a66"});case 10:if("update"!==n){e.next=16;break}return e.next=13,(0,g.Cs)(X);case 13:l=e.sent,200!==l.status&&$({open:!0,title:"\u5831\u50f9\u55ae\u5132\u5b58\u932f\u8aa4",infoContain:"\u8acb\u7a0d\u5f8c\u518d\u8a66"});case 16:if("submit"!==n){e.next=19;break}return e.next=19,(0,g.TF)("submit",X.orderId).then((function(e){200===(null===e||void 0===e?void 0:e.status)&&j("/quotation/index")})).catch((function(){$({open:!0,title:"\u5831\u50f9\u55ae\u5132\u5b58\u932f\u8aa4",infoContain:"\u8acb\u7a0d\u5f8c\u518d\u8a66"})}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)},ue=(0,l.useCallback)((0,a.Z)((0,r.Z)().mark((function e(){var n,a,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new URLSearchParams(window.location.search).get("orderId"),!t||"edit"!==t||!n){e.next=13;break}return e.next=4,(0,g.HG)(n).catch((function(e){return console.log(e)}));case 4:if(a=e.sent,null===(i=a.data)||void 0===i||!i.order){e.next=10;break}return(o=i.order).quotationGroup=le(o.quotationGroup),e.abrupt("return",Q(o));case 10:return e.abrupt("return",Q({}));case 13:Q({basicInfo:C.basicInfo,quotationGroup:le(C.quotationGroup),quotationTotal:C.quotationTotal,note:"1. \u672c\u5831\u50f9\u55ae\u70ba\u542b\u7a05\u5831\u50f9\uff0c\u6b64\u5831\u50f9\u70ba\u4e09\u5e74\u671f\u6700\u4f4e\u7e3d\u50f9\uff0c\u672c\u5831\u50f9\u4e0d\u542b\u5b89\u88dd\u3001\u6559\u80b2\u8a13\u7df4\u8cbb\u7528\u3001\u5b9a\u88fd\u5316\u53ca\u884d\u751f\u6027\u5c08\u696d\u670d\u52d9\u7b49\u3002\n2. \u672c\u5831\u50f9\u55ae\u6709\u6548\u671f\u9650\u70ba\u5831\u50f9\u65e5\u8d77\u4e94\u5929\uff0c\u903e\u671f\u5831\u50f9\u5931\u6548\u3002\n3. \u8cb7\u65b9\u61c9\u65bc\u6536\u5230\u8ce3\u65b9\u767c\u7968\u5f8c\u3010\u5345\u3011\u5929\u5167\uff0c\u5c07\u61c9\u4ed8\u6b3e\u9805\u4e00\u6b21\u6027\u652f\u4ed8\u4e88\u8ce3\u65b9\u3002\n4. \u8cb7\u65b9\u7c3d\u56de\u672c\u5831\u50f9\u55ae\u5f8c\u8996\u540c\u6b63\u5f0f\u63a1\u8cfc\u5408\u7d04\uff0c\u8cb7\u65b9\u4e0d\u5f97\u4ee5\u4efb\u4f55\u7406\u7531\u5411\u8ce3\u65b9/\u539f\u5ee0\u8981\u6c42\u9000\u63db\u8ca8\u6216\u9000\u8cbb\uff0c\u4ea6\u4e0d\u5f97\u4ee5\u7c3d\u56de\u4e4b\u8cb7\u65b9\u516c\u53f8\u54e1\u5de5\u7121\u7c3d\u7d04\u4ee3\u7406\u6b0a\u800c\u62d2\u7d55\u4ed8\u6b3e\u3002\u6388\u6b0a\u671f\u9593\u5230\u671f\u82e5\u6709  \u672a\u4f7f\u7528\u7684\u91d1\u984d\u3001\u6388\u6b0a\u7528\u91cf\u7b49\uff0c\u8cb7\u65b9\u540c\u610f\u81ea\u52d5\u653e\u68c4\u76f8\u95dc\u6b0a\u76ca\uff0c\u7121\u6cd5\u7533\u8acb\u905e\u5ef6\uff0c\u4ea6\u7121\u6cd5\u8f49\u63db\u5176\u4ed6\u670d\u52d9\u7b49\u3002\n5. Enterprise\u5408\u7d04\uff08EA\uff09\u4e09\u5e74\u671f\u9593\uff0cPAL(Partner Admin Link)\u7684MPN ID\u70ba\u8ce3\u65b9\u6240\u6709\u3002\u8cb7\u65b9\u9808\u4f9d\u539f\u5ee0\u4e4b\u8981\u6c42\uff0c\u5b8c\u6210\u76f8\u95dc\u7dda\u4e0a\u96fb\u5b50\u7c3d\u7f72\u4f5c\u696d\u3010\u5305\u542bCPOR(Claiming Partner of Record)\u53caDPOR(Digital Partner of Record)\u5ba2\u6236\u95dc\u806f\u7b49\u3011\u3002\n6. \u672c\u8edf\u9ad4\u4e4b\u4f7f\u7528\u82e5\u6709\u9700\u900f\u904e\u5e33\u865f\u5bc6\u78bc\u4e4b\u65b9\u5f0f\u8005\uff0c\u8ce3\u65b9\u4e0d\u8ca0\u4efb\u4f55\u5e33\u865f\u5bc6\u78bc\u4fdd\u7ba1\u8cac\u4efb\uff0c\u8cb7\u65b9\u61c9\u5584\u76e1\u4fdd\u7ba1\u4e4b\u8cac\uff0c\u4e14\u7d93\u5e38\u4e0d\u5b9a\u6642\u66f4\u65b0\u5bc6\u78bc\uff0c\u4ee5\u907f\u514d\u906d\u53d7\u7b2c\u4e09\u4eba\u4e4b\u653b\u64ca\u6216\u76dc\u7528\u7b49\u3002\u900f\u904e\u8a72\u7d44\u5e33\u865f\u5bc6\u78bc\u6240\u9032\u884c\u4e4b\u6240\u6709\u884c\u70ba\uff0c\u7686\u8996\u540c\u8cb7\u65b9\u884c\u70ba\uff0c\u8cb7\u65b9\u61c9\u81ea\u8ca0\u6240\u6709\u6cd5\u5f8b\u8cac\u4efb\uff0c\u53ca\u56e0\u6b64\u6240\u7522\u751f\u4e4b\u5404\u7a2e\u53ef\u80fd\u906d\u53d7\u4e4b\u640d\u5bb3\u3002\n7. \u672c\u8edf\u9ad4\u4e4b\u6700\u7d42\u7248\u672c\u7531\u539f\u5ee0\u6309\u73fe\u72c0\u63d0\u4f9b\uff0c\u8ce3\u65b9\u4e0d\u70ba\u4efb\u4f55\u660e\u793a\u6216\u9ed8\u793a\u4e4b\u64d4\u4fdd\uff0c\u4ea6\u4e0d\u4fdd\u8b49\u6240\u63d0\u51fa\u4e4b\u7d66\u4ed8\uff0c\u4e26\u7121\u4efb\u4f55\u6284\u8972\u6216\u4eff\u5192\u4e4b\u60c5\u4e8b\uff0c\u6216\u672a\u4fb5\u5bb3\u7b2c\u4e09\u4eba\u4e4b\u667a\u6167\u8ca1\u7522\u6b0a\u6216\u5176\u4ed6\u6b0a\u5229\u3002\u8ce3\u65b9\u4ea6\u4e0d\u627f\u64d4\u5f8c\u7e8c\u7dad\u4fee\u3001\u66f4\u65b0\u3001\u96f6\u914d\u4ef6\u4f9b\u61c9\u7b49\u3002\n8. \u8cb7\u65b9\u61c9\u5207\u5be6\u9075\u5b88\u539f\u5ee0\u4e4b\u6388\u6b0a\u689d\u6b3e\u3001\u8cc7\u8a0a\u5b89\u5168\u63a7\u7ba1\u898f\u7bc4\u53ca\u4f7f\u7528\u9650\u5236\u7b49\u898f\u5b9a\uff0c\u4e26\u7c3d\u7f72\u539f\u5ee0\u8981\u6c42\u4e4b\u76f8\u95dc\u5408\u7d04\u6587\u4ef6\u3002\u5982\u6709\u9055\u53cd\uff0c\u8cb7\u65b9\u9664\u61c9\u6309\u672c\u5831\u50f9\u55ae\u4e4b\u6700\u4f4e\u7e3d\u50f9\u5341\u500d\u4e4b\u6578\u984d\uff0c\u4f5c\u70ba\u61f2\u7f70\u6027\u8ce0\u511f\u91d1\u8ce0\u511f\u65bc\u8ce3\u65b9\u5916\uff0c\u4e26\u61c9\u81ea\u884c\u8ca0\u64d4\u6c11\u3001\u5211\u4e8b\u8cac\u4efb\u3002\n9. \u82e5\u8cb7\u65b9\u55ae\u65b9\u9762\u89e3\u9664\u6216\u7d42\u6b62\u672c\u5831\u50f9\u55ae\uff0c\u9664\u4e0d\u5f97\u8acb\u6c42\u8ce3\u65b9\u8fd4\u9084\u4efb\u4f55\u6b3e\u9805\u4e14\u4ecd\u9808\u4f9d\u672c\u5831\u50f9\u55ae\u7e3d\u50f9\u4ed8\u6b3e\u5916\uff0c\u8cb7\u65b9\u5c1a\u9808\u7d66\u4ed8\u8ce3\u65b9\u5982\u4e0b\u4e4b\u61f2\u7f70\u6027\u9055\u7d04\u91d1\uff0c\u5982\u8ce3\u65b9\u53e6\u6709\u5176\u4ed6\u640d\u5bb3\uff0c\u8cb7\u65b9\u4ea6\u61c9\u8ce0\u511f\u4e4b\uff1a\n(1) \u8ce3\u65b9\u5c1a\u672a\u5411\u539f\u5ee0\u63a1\u8cfc\u6642\uff0c\u4ee5\u672c\u5831\u50f9\u55ae\u7e3d\u50f9\u4e4b50%\u4f5c\u70ba\u61f2\u7f70\u6027\u9055\u7d04\u91d1\u3002\n(2) \u8ce3\u65b9\u5df2\u5411\u539f\u5ee0\u63a1\u8cfc\u6642\uff0c\u4ee5\u672c\u5831\u50f9\u55ae\u7e3d\u50f9\u4e4b100%\u4f5c\u70ba\u61f2\u7f70\u6027\u9055\u7d04\u91d1\u3002\n10. \u8ce3\u65b9\u5c0d\u8cb7\u65b9\u56e0\u672c\u5831\u50f9\u55ae\u6240\u751f\u4e4b\u640d\u5bb3\u8ce0\u511f\u8cac\u4efb\uff0c\u4ee5\u672c\u5831\u50f9\u55ae\u7e3d\u50f9\u4e4b\u767e\u5206\u4e4b\u5341\u70ba\u4e0a\u9650\u3002\u4f46\u4e0d\u9069\u7528\u65bc\u8cb7\u65b9\u4f9d\u672c\u5831\u50f9\u55ae\u61c9\u652f\u4ed8\u8ce3\u65b9\u4e4b\u50f9\u6b3e\uff0c\u8cb7\u65b9\u4e4b\u6cd5\u5b9a\u4ee3\u7406\u4eba\u61c9\u8207\u8cb7\u65b9\u8ca0\u9023\u5e36\u8ce0\u511f\u8cac\u4efb\u3002\n11. \u672c\u5831\u50f9\u55ae\u689d\u6b3e\u6548\u529b\u512a\u65bc\u65bc\u5148\u524d\u3001\u540c\u6642\u6216\u55e3\u5f8c\u5c31\u672c\u8edf\u9ad4\u63a1\u8cfc\u6240\u70ba\u4e4b\u4e00\u5207\u53e3\u982d\u7d04\u5b9a\u6216\u8cb7\u65b9\u4e4b\u66f8\u9762\u8a02\u55ae\u7b49\u3002\n12. \u5c31\u672c\u5831\u50f9\u55ae\u6709\u95dc\u6d89\u8a1f\u4e8b\u9805\uff0c\u4ee5\u81fa\u7063\u81fa\u5317\u5730\u65b9\u6cd5\u9662\u70ba\u7b2c\u4e00\u5be9\u7ba1\u8f44\u6cd5\u9662\u3002"});case 14:case"end":return e.stop()}}),e)}))),[t,le]);if((0,l.useEffect)((function(){Q(null)}),[t]),(0,l.useEffect)((function(){X||ue()}),[ue,X]),!X)return(0,D.jsx)(_.Z,{isShow:!0});var de=X.basicInfo,pe=X.quotationGroup,me=X.quotationTotal,he=X.note,xe=X.orderId,fe=X.status;return fe&&"A"!==fe?(0,D.jsx)("div",{className:"d-flex justify-content-center p-5",children:"\u6b64\u5f35\u55ae\u5df2\u4e0d\u53ef\u7de8\u8f2f"}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"px-3",children:(0,D.jsxs)(b.lx,{action:"",method:"post",className:"container",children:[(0,D.jsxs)("div",{className:"form-box",children:[(0,D.jsxs)(b.rb,{className:"mb-3",children:[(0,D.jsx)(b.b7,{md:4,children:(0,D.jsx)(b.jO,{label:"\u8a02\u55ae\u7de8\u865f",placeholder:"\u5132\u5b58\u8868\u55ae\u5f8c\uff0c\u7cfb\u7d71\u6703\u5e36\u51fa",defaultValue:xe,readOnly:!0,disabled:!0})}),(0,D.jsx)(b.b7,{md:4,children:(0,D.jsx)(b.jO,{label:"\u5ba2\u6236\u540d\u7a31",placeholder:"\u8acb\u8f38\u5165\u5ba2\u6236\u540d\u7a31",defaultValue:(null===de||void 0===de?void 0:de.company)||"",onChange:function(e){return oe("company",e.target.value)},required:!0})}),(0,D.jsx)(b.b7,{md:4,children:(0,D.jsx)(b.jO,{label:"\u7d71\u4e00\u7de8\u865f",placeholder:"\u8acb\u8f38\u5165\u7d71\u4e00\u7de8\u865f",defaultValue:(null===de||void 0===de?void 0:de.taxID)||"",onChange:function(e){return oe("taxID",e.target.value)},required:!0})})]}),(0,D.jsxs)(b.rb,{className:"mb-3",children:[(0,D.jsx)(b.b7,{md:4,children:(0,D.jsx)(b.jO,{label:"\u806f\u7d61\u4eba",placeholder:"\u8acb\u8f38\u5165\u59d3\u540d",defaultValue:(null===de||void 0===de?void 0:de.contactPerson)||"",onChange:function(e){return oe("contactPerson",e.target.value)}})}),(0,D.jsx)(b.b7,{md:4,children:(0,D.jsx)(b.jO,{type:"email",label:"Email",placeholder:"\u8acb\u8f38\u5165Email",defaultValue:(null===de||void 0===de?void 0:de.email)||"",onChange:function(e){return oe("email",e.target.value)}})}),(0,D.jsx)(b.b7,{md:4,children:(0,D.jsx)(b.jO,{label:"\u96fb\u8a71",placeholder:"\u8acb\u8f38\u5165\u96fb\u8a71",defaultValue:(null===de||void 0===de?void 0:de.phone)||"",onChange:function(e){return oe("phone",e.target.value)}})})]}),(0,D.jsx)(b.rb,{children:(0,D.jsx)(b.b7,{md:12,children:(0,D.jsx)(b.jO,{label:"\u5730\u5740",placeholder:"\u8acb\u8f38\u5165\u5730\u5740",defaultValue:(null===de||void 0===de?void 0:de.address)||"",onChange:function(e){return oe("address",e.target.value)}})})})]}),(0,D.jsxs)("div",{className:"px-0 mb-2 d-flex justify-content-between align-items-center",children:[(0,D.jsx)("h5",{className:"mb-0",children:"\u670d\u52d9\u5831\u50f9"}),(0,D.jsxs)("div",{children:[(0,D.jsx)(b.u5,{color:"primary",shape:"rounded-pill",className:"me-2",onClick:function(){return te("PS")},children:"\u65b0\u589ePS\u9805\u76ee"}),(0,D.jsx)(b.u5,{color:"primary",shape:"rounded-pill",onClick:te,children:"\u65b0\u589e\u9805\u76ee"})]})]}),pe&&pe.length?(0,D.jsxs)(b.n2,{variant:"tabs",role:"tablist",children:[pe.map((function(e,n){return(0,D.jsxs)(b.U6,{role:"presentation",className:"position-relative",children:[(0,D.jsx)(b.AQ,{className:"px-4",active:L===n,component:"button",role:"tab","aria-controls":e.groupName,"aria-selected":L===n,onClick:function(e){e.preventDefault(),E(n)},children:e.groupName}),(0,D.jsx)(u.Z,{icon:d.N,size:"sm",className:"ms-1 tab-action-icon",onClick:function(){return function(e){var n=(0,f.cloneDeep)(X.quotationGroup);n&&1===n.length||(n.splice(e,1),Q((function(e){return(0,o.Z)((0,o.Z)({},e),{},{quotationGroup:n,quotationTotal:ie(n)})})),E(n.length-1))}(n)}})]},n)})),(0,D.jsxs)("div",{className:"d-flex align-items-center px-2",children:[(0,D.jsx)("div",{className:"d-flex align-items-center me-2",onClick:function(){var e=(0,f.cloneDeep)(X.quotationGroup[X.quotationGroup.length-1]);e.groupName="\u7fa4\u7d44".concat(X.quotationGroup.length+1),e.productLists=se(e.productLists),Q((function(n){return(0,o.Z)((0,o.Z)({},n),{},{quotationGroup:[].concat((0,i.Z)(n.quotationGroup),[e]),quotationTotal:ie([].concat((0,i.Z)(n.quotationGroup),[e]))})})),E(X.quotationGroup.length)},children:(0,D.jsx)("div",{className:"action-icon add-icon",children:(0,D.jsx)(u.Z,{className:"text-light",icon:p.q})})}),(0,D.jsx)(u.Z,{icon:m.l,size:"sm",className:"ms-1 action-icon",onClick:function(){return function(){var e=[];X.quotationGroup.forEach((function(n){e.push(n.groupName)})),ne(e),R(!0)}()}})]})]}):null,(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsx)("div",{className:"service-quote rounded-0 px-2 overflow-scroll",children:(0,D.jsx)(b.gr,{children:pe&&pe.length?pe.map((function(e,n){return(0,D.jsx)(b.IA,{role:"tabpanel","aria-labelledby":e.groupName,visible:L===n,children:(0,D.jsx)(b.Sx,{hover:!0,className:"table-bg-none",columns:P,children:(0,D.jsxs)(b.NR,{children:[e.productLists&&e.productLists.length?e.productLists.map((function(e,t){return(0,D.jsxs)(b.T6,{children:[(0,D.jsxs)(b.NN,{align:"middle",className:"d-flex align-items-center",children:[(0,D.jsx)(b.jO,{defaultValue:e.partNum||"",size:"sm",disabled:!0,readOnly:!0,onChange:function(e){return re(t,"partNum",e.target.value)}}),(0,D.jsx)(u.Z,{icon:h.B,size:"xxl",className:"ms-1 action-icon",onClick:function(){return e=t,w(!0),void U(e);var e}})]}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsx)(b.jO,{defaultValue:e.productDes||"",size:"sm",disabled:"PS"!==e.partNum,onChange:function(e){return re(t,"productDes",e.target.value)}})}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsx)(b.jO,{type:"date",defaultValue:e.startDate||"",size:"sm",onChange:function(e){return re(t,"startDate",e.target.value)}})}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsx)(b.jO,{defaultValue:e.measure||"",onChange:function(e){return re(t,"measure",e.target.value)},size:"sm"})}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsx)(b.jO,{type:"number",min:0,defaultValue:e.quantity||"",size:"sm",onChange:function(e){return re(t,"quantity",e.target.value)}})}),(0,D.jsx)(b.NN,{align:"middle",children:e.unitPrice||"-"}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsx)(b.jO,{type:"number",defaultValue:e.QTY||"",size:"sm",min:0,onChange:function(e){return re(t,"QTY",e.target.value)}})}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsx)(b.jO,{defaultValue:e.country||"",size:"sm",onChange:function(e){return re(t,"country",e.target.value)}})}),(0,D.jsx)(b.NN,{align:"middle",children:"PS"!==e.partNum?(0,v.XY)(e.totalAmount)||"-":(0,D.jsx)(b.jO,{type:"number",defaultValue:e.totalAmount||"",size:"sm",min:0,onChange:function(e){return re(t,"totalAmount",parseInt(e.target.value))}})}),(0,D.jsx)(b.NN,{align:"middle",children:(0,v.XY)(e.estimatedRetailPrice)||"-"}),(0,D.jsx)(b.NN,{align:"middle",children:(0,v.XY)(e.currentNetPrice)||"-"}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsx)(b.jO,{type:"number",defaultValue:e.discountedNetPrice||"",size:"sm",min:0,onChange:function(e){return re(t,"discountedNetPrice",e.target.value)}})}),(0,D.jsxs)(b.NN,{align:"middle",children:[e.customerDiscount||"-","%"]}),(0,D.jsx)(b.NN,{align:"middle",children:e.maximumReslaePrice||"-"}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsxs)(b.YR,{size:"sm",children:[(0,D.jsx)(b.jO,{type:"number",defaultValue:e.markupMargin||"",min:0,onChange:function(e){return re(t,"markupMargin",e.target.value)}}),(0,D.jsx)(b.wV,{children:"%"})]})}),(0,D.jsx)(b.NN,{align:"middle",children:(0,D.jsx)("div",{className:"d-flex align-items-center",onClick:function(){return function(e){var n=(0,f.cloneDeep)(X.quotationGroup),t=n[L].productLists;t&&1===t.length||(t.splice(e,1),n[L].subTotal=ae(t),Q((function(e){return(0,o.Z)((0,o.Z)({},e),{},{quotationGroup:n,quotationTotal:ie(n)})})))}(t)},children:(0,D.jsx)("div",{className:"action-icon deleted-icon",children:(0,D.jsx)(u.Z,{className:"text-light",icon:x.c})})})})]},"".concat(n).concat(e.uniKey))})):null,(0,D.jsx)(b.T6,{children:(0,D.jsxs)(b.NN,{colSpan:16,children:["\u5c0f\u8a08\uff1aNT$",(0,v.XY)(e.subTotal)||"-"]})})]})})},"".concat(n,"_").concat(e.groupName))})):null})}),(0,D.jsxs)("div",{className:"calculate-fields",children:[(0,D.jsxs)("div",{className:"field-title",children:[(0,D.jsx)("div",{className:"field",children:"total(\u672a\u7a05)\uff1a"}),(0,D.jsx)("div",{className:"field",children:"\u71df\u696d\u7a05(5%)\uff1a"}),(0,D.jsx)("div",{className:"field",children:"total(\u542b\u7a05)\uff1a"})]}),(0,D.jsxs)("div",{className:"field-content",children:[(0,D.jsxs)("div",{className:"field",children:["NT$ ",(0,v.XY)(null===me||void 0===me?void 0:me.taxExcluded)||"-"]}),(0,D.jsxs)("div",{className:"field",children:["NT$ ",(0,v.XY)(null===me||void 0===me?void 0:me.tax)||"-"]}),(0,D.jsxs)("div",{className:"field",children:["NT$ ",(0,v.XY)(null===me||void 0===me?void 0:me.taxIncluded)||"-"]})]})]})]}),(0,D.jsx)("div",{className:"px-0 mb-2 d-flex justify-content-between align-items-center",children:(0,D.jsx)("h5",{className:"mb-0",children:"\u5099\u8a3b"})}),(0,D.jsx)("div",{className:"form-box px-2",children:(0,D.jsx)(b.PB,{rows:15,defaultValue:he||"",onChange:function(e){return Q((function(n){return(0,o.Z)((0,o.Z)({},n),{},{note:e.target.value})}))}})}),(0,D.jsx)(q,{open:T,onClose:function(){return w(!1)},setCurrentItemData:function(e){return function(e){if(e){var n=(0,f.cloneDeep)(X.quotationGroup),t=n[L].productLists,r=t[Y];r.partNum=e.partNumber,r.productDes=e.itemName,r.estimatedRetailPrice=e.estimatedRetailPrice,r.currentNetPrice=e.currentNetPrice,n.subTotal=ae(t),Q((function(e){return(0,o.Z)((0,o.Z)({},e),{},{quotationGroup:n,quotationTotal:ie(X.quotationGroup)})})),w(!1)}}(e)}}),(0,D.jsxs)(b.Tk,{visible:O,onClose:function(){return R(!1)},children:[(0,D.jsx)(b.p0,{children:(0,D.jsx)(b.fl,{children:"\u7de8\u8f2f\u7fa4\u7d44\u540d\u7a31"})}),(0,D.jsx)(b.sD,{children:(0,D.jsx)("div",{className:"px-2",children:ee&&ee.length?ee.map((function(e,n){return(0,D.jsx)("div",{className:"mb-2",children:(0,D.jsx)(b.YR,{children:(0,D.jsx)(b.jO,{defaultValue:e,onChange:function(e){!function(e,n){var t=(0,f.cloneDeep)(ee);t[e]=n,ne(t)}(n,e.target.value)}})})},"".concat(e,"_").concat(n))})):null})}),(0,D.jsxs)(b.Ym,{children:[(0,D.jsx)(b.u5,{color:"secondary",onClick:function(){return R(!1)},children:"\u53d6\u6d88"}),(0,D.jsx)(b.u5,{color:"primary",onClick:function(){var e=(0,f.cloneDeep)(X.quotationGroup);ee.forEach((function(n,t){e[t].groupName=n})),Q((function(n){return(0,o.Z)((0,o.Z)({},n),{},{quotationGroup:e})})),R(!1)},children:"\u78ba\u5b9a"})]})]})]})}),(0,D.jsx)("div",{className:"form-action-wrap px-4 py-2",children:xe?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b.u5,{color:"primary",className:"me-2",onClick:function(){return ce("update")},children:"\u5132\u5b58"}),(0,D.jsx)(b.u5,{color:"warning",onClick:function(){return ce("submit")},children:"\u9001\u5be9"})]}):(0,D.jsx)(b.u5,{color:"primary",onClick:function(){return ce("save")},children:"\u5efa\u7acb\u5831\u50f9\u55ae"})}),(0,D.jsx)(y.Z,{title:K.title,isShow:K.open,closeModal:function(){return $((function(e){return(0,o.Z)((0,o.Z)({},e),{},{open:!1})}))},infoContain:K.infoContain})]})}},24654:function(){}}]);
//# sourceMappingURL=516.496c1ffd.chunk.js.map